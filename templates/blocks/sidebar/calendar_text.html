{% load wagtailimages_tags %}

<script src="https://unpkg.com/vue"></script>
<script src="https://unpkg.com/vue-router"></script>
<script src="https://unpkg.com/moment"></script>
<script src="https://unpkg.com/moment/locale/de"></script>

<div id="calendar-widget">
	<div class="sidebar sidebar-calendar-text">
		<div id="calendar">
            <div class="icon">
				<em>
				{% verbatim %}
					{{ weekday }}
				{% endverbatim %}
				</em>
                <strong>
				{% verbatim %}
					{{ month }}
				{% endverbatim %}
				</strong>
				<span>
				{% verbatim %}
					{{ day }}
				{% endverbatim %}
				</span>
			</div>
		</div>
		<div class="text">
			{{ value.content }}
		</div>
	</div>
</div>

<script>
moment.locale('de');

const event_date = `{{ value.calendar|date:"Y-m-d" }}`

const widget = new Vue({
  el: "#calendar",
  name: "calendar",
  props: {
    date: String,
  },
  data: {
	day: moment(event_date, 'YYYY-MM-DD').format('D'),
	month: moment(event_date, 'YYYY-MM-DD').format('MMMM'),
	weekday: moment(event_date, 'YYYY-MM-DD').format('dddd'),
  },
});
</script>

<style scoped>
@import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap');

#calendar {
	margin-right: 10px;
}
div.icon
{
  font-size: 1em; /* change icon size */
  display: block;
  position: relative;
  width: 7em;
  height: 7em;
  background-color: #fff;
  margin: 0.5em;
  border-radius: 0.6em;
  box-shadow: 0 1px 0 #bdbdbd, 0 2px 0 #fff, 0 3px 0 #bdbdbd, 0 4px 0 #fff, 0 5px 0 #bdbdbd, 0 0 0 1px #bdbdbd;
  overflow: hidden;
  -webkit-backface-visibility: hidden;
  -webkit-transform: rotate(0deg) skewY(0deg);
  -webkit-transform-origin: 50% 10%;
  transform-origin: 50% 10%;
  font-family: 'Roboto', sans-serif;
  padding-left: 0px !important;
}

div.icon *
{
  display: block;
  width: 100%;
  font-size: 1em;
  font-weight: bold;
  font-style: normal;
  text-align: center;
}

div.icon strong
{
  position: absolute;
  top: 0;
  padding: 0.4em 0;
  color: #fff;
  background-color: #D94440;
}

div.icon em
{
  position: absolute;
  bottom: 0.3em;
  color: #D94440;
}

div.icon span
{
  width: 100%;
  font-size: 2.8em;
  letter-spacing: -0.05em;
  padding: 45px 0;
  color: #2f2f2f;
}

div.icon:hover, div.icon:focus
{
  -webkit-animation: swing 0.6s ease-out;
  animation: swing 0.6s ease-out;
}

@-webkit-keyframes swing {
  0%   { -webkit-transform: rotate(0deg)  skewY(0deg); }
  20%  { -webkit-transform: rotate(12deg) skewY(4deg); }
  60%  { -webkit-transform: rotate(-9deg) skewY(-3deg); }
  80%  { -webkit-transform: rotate(6deg)  skewY(-2deg); }
  100% { -webkit-transform: rotate(0deg)  skewY(0deg); }
}

@keyframes swing {
  0%   { transform: rotate(0deg)  skewY(0deg); }
  20%  { transform: rotate(12deg) skewY(4deg); }
  60%  { transform: rotate(-9deg) skewY(-3deg); }
  80%  { transform: rotate(6deg)  skewY(-2deg); }
  100% { transform: rotate(0deg)  skewY(0deg); }
}
</style>

