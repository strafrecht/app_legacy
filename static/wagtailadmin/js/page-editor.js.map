{"version":3,"sources":["webpack://wagtail/./client/src/entrypoints/admin/page-editor.js","webpack://wagtail/external \"jQuery\"","webpack://wagtail/webpack/bootstrap","webpack://wagtail/webpack/runtime/global","webpack://wagtail/webpack/runtime/hasOwnProperty shorthand","webpack://wagtail/webpack/runtime/jsonp chunk loading","webpack://wagtail/webpack/startup"],"names":["__importDefault","this","mod","__esModule","exports","jquery_1","cleanForSlug","val","useURLify","cleaned","URLify","window","unicodeSlugsEnabled","replace","toLowerCase","initSlugAutoPopulate","slugFollowsTitle","on","currentSlug","slugifiedTitle","value","initSlugCleaning","initErrorDetection","errorSections","index","each","parentSection","closest","attr","addClass","initCollapsibleBlocks","$li","$fieldset","find","hasClass","length","hide","removeClass","show","initKeyboardShortcuts","Mousetrap","bind","trigger","halloPlugins","registerHalloPlugin","name","opts","InlinePanel","self","formsUl","not","parent","prefix","childId","deleteInputId","setHasContent","slideUp","updateMoveButtonDisabledStates","updateAddButtonState","canOrder","currentChild","currentChildOrderElem","children","currentChildOrder","prevChild","prevAll","first","prevChildOrderElem","prevChildOrder","animateSwap","insertBefore","nextChild","nextAll","nextChildOrderElem","nextChildOrder","insertAfter","remove","formsetPrefix","forms_1","i","toggleClass","maxForms","forms","addButton","item1","item2","css","height","position","top","animate","removeAttr","buildExpandingFormset","onAdd","formCount","newChildPrefix","emptyChildFormPrefix","initChildControls","$previewButton","$form","previewUrl","data","autoUpdatePreviewDataTimeout","setPreviewData","ajax","url","method","FormData","processData","contentType","one","clearTimeout","setTimeout","e","preventDefault","$this","$icon","filter","thisPreviewUrl","previewWindow","open","focus","done","is_valid","document","location","close","fail","alert","always","module","jQuery","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","call","m","x","g","globalThis","Function","o","obj","prop","Object","prototype","hasOwnProperty","installedChunks","607","deferredModules","checkDeferredModules","webpackJsonpCallback","parentChunkLoadingFunction","chunkId","chunkIds","moreModules","runtime","executeModules","resolves","push","shift","apply","chunkLoadingGlobal","checkDeferredModulesImpl","result","deferredModule","fulfilled","j","depId","splice","s","forEach","startup"],"mappings":"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","file":"wagtail/admin/static/wagtailadmin/js/page-editor.js","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar jquery_1 = __importDefault(require(\"jquery\"));\nwindow.halloPlugins = {};\n// eslint-disable-next-line no-unused-vars\nfunction registerHalloPlugin(name, opts) {\n    /* Obsolete - used on Wagtail <1.12 to register plugins for the hallo.js editor.\n    Defined here so that third-party plugins can continue to call it to provide Wagtail <1.12\n    compatibility, without throwing an error on later versions. */\n}\nwindow.registerHalloPlugin = registerHalloPlugin;\nfunction InlinePanel(opts) {\n    var self = {};\n    // eslint-disable-next-line func-names\n    self.setHasContent = function () {\n        if (jquery_1[\"default\"]('> li', self.formsUl).not('.deleted').length) {\n            self.formsUl.parent().removeClass('empty');\n        }\n        else {\n            self.formsUl.parent().addClass('empty');\n        }\n    };\n    // eslint-disable-next-line func-names\n    self.initChildControls = function (prefix) {\n        var childId = 'inline_child_' + prefix;\n        var deleteInputId = 'id_' + prefix + '-DELETE';\n        // mark container as having children to identify fields in use from those not\n        self.setHasContent();\n        jquery_1[\"default\"]('#' + deleteInputId + '-button').on('click', function () {\n            /* set 'deleted' form field to true */\n            jquery_1[\"default\"]('#' + deleteInputId).val('1');\n            jquery_1[\"default\"]('#' + childId).addClass('deleted').slideUp(function () {\n                self.updateMoveButtonDisabledStates();\n                self.updateAddButtonState();\n                self.setHasContent();\n            });\n        });\n        if (opts.canOrder) {\n            jquery_1[\"default\"]('#' + prefix + '-move-up').on('click', function () {\n                var currentChild = jquery_1[\"default\"]('#' + childId);\n                var currentChildOrderElem = currentChild.children('input[name$=\"-ORDER\"]');\n                var currentChildOrder = currentChildOrderElem.val();\n                /* find the previous visible 'inline_child' li before this one */\n                var prevChild = currentChild.prevAll(':not(.deleted)').first();\n                if (!prevChild.length)\n                    return;\n                var prevChildOrderElem = prevChild.children('input[name$=\"-ORDER\"]');\n                var prevChildOrder = prevChildOrderElem.val();\n                // async swap animation must run before the insertBefore line below, but doesn't need to finish first\n                self.animateSwap(currentChild, prevChild);\n                currentChild.insertBefore(prevChild);\n                currentChildOrderElem.val(prevChildOrder);\n                prevChildOrderElem.val(currentChildOrder);\n                self.updateMoveButtonDisabledStates();\n            });\n            jquery_1[\"default\"]('#' + prefix + '-move-down').on('click', function () {\n                var currentChild = jquery_1[\"default\"]('#' + childId);\n                var currentChildOrderElem = currentChild.children('input[name$=\"-ORDER\"]');\n                var currentChildOrder = currentChildOrderElem.val();\n                /* find the next visible 'inline_child' li after this one */\n                var nextChild = currentChild.nextAll(':not(.deleted)').first();\n                if (!nextChild.length)\n                    return;\n                var nextChildOrderElem = nextChild.children('input[name$=\"-ORDER\"]');\n                var nextChildOrder = nextChildOrderElem.val();\n                // async swap animation must run before the insertAfter line below, but doesn't need to finish first\n                self.animateSwap(currentChild, nextChild);\n                currentChild.insertAfter(nextChild);\n                currentChildOrderElem.val(nextChildOrder);\n                nextChildOrderElem.val(currentChildOrder);\n                self.updateMoveButtonDisabledStates();\n            });\n        }\n        /* Hide container on page load if it is marked as deleted. Remove the error\n         message so that it doesn't count towards the number of errors on the tab at the\n         top of the page. */\n        if (jquery_1[\"default\"]('#' + deleteInputId).val() === '1') {\n            jquery_1[\"default\"]('#' + childId).addClass('deleted').hide(0, function () {\n                self.updateMoveButtonDisabledStates();\n                self.updateAddButtonState();\n                self.setHasContent();\n            });\n            jquery_1[\"default\"]('#' + childId).find('.error-message').remove();\n        }\n    };\n    self.formsUl = jquery_1[\"default\"]('#' + opts.formsetPrefix + '-FORMS');\n    // eslint-disable-next-line func-names\n    self.updateMoveButtonDisabledStates = function () {\n        if (opts.canOrder) {\n            var forms_1 = self.formsUl.children('li:not(.deleted)');\n            // eslint-disable-next-line func-names\n            forms_1.each(function (i) {\n                jquery_1[\"default\"]('ul.controls .inline-child-move-up', this)\n                    .toggleClass('disabled', i === 0)\n                    .toggleClass('enabled', i !== 0);\n                jquery_1[\"default\"]('ul.controls .inline-child-move-down', this)\n                    .toggleClass('disabled', i === forms_1.length - 1)\n                    .toggleClass('enabled', i !== forms_1.length - 1);\n            });\n        }\n    };\n    // eslint-disable-next-line func-names\n    self.updateAddButtonState = function () {\n        if (opts.maxForms) {\n            var forms = jquery_1[\"default\"]('> [data-inline-panel-child]', self.formsUl).not('.deleted');\n            var addButton = jquery_1[\"default\"]('#' + opts.formsetPrefix + '-ADD');\n            if (forms.length >= opts.maxForms) {\n                addButton.addClass('disabled');\n            }\n            else {\n                addButton.removeClass('disabled');\n            }\n        }\n    };\n    // eslint-disable-next-line func-names\n    self.animateSwap = function (item1, item2) {\n        var parent = self.formsUl;\n        var children = parent.children('li:not(.deleted)');\n        // Apply moving class to container (ul.multiple) so it can assist absolute positioning of it's children\n        // Also set it's relatively calculated height to be an absolute one,\n        // to prevent the containercollapsing while its children go absolute\n        parent.addClass('moving').css('height', parent.height());\n        // eslint-disable-next-line func-names\n        children.each(function () {\n            jquery_1[\"default\"](this).css('top', jquery_1[\"default\"](this).position().top);\n        }).addClass('moving');\n        // animate swapping around\n        item1.animate({\n            top: item2.position().top\n        }, 200, function () {\n            parent.removeClass('moving').removeAttr('style');\n            children.removeClass('moving').removeAttr('style');\n        });\n        item2.animate({\n            top: item1.position().top\n        }, 200, function () {\n            parent.removeClass('moving').removeAttr('style');\n            children.removeClass('moving').removeAttr('style');\n        });\n    };\n    // eslint-disable-next-line no-undef\n    buildExpandingFormset(opts.formsetPrefix, {\n        onAdd: function (formCount) {\n            var newChildPrefix = opts.emptyChildFormPrefix.replace(/__prefix__/g, formCount);\n            self.initChildControls(newChildPrefix);\n            if (opts.canOrder) {\n                /* NB form hidden inputs use 0-based index and only increment formCount *after* this function is run.\n                Therefore formcount and order are currently equal and order must be incremented\n                to ensure it's *greater* than previous item */\n                jquery_1[\"default\"]('#id_' + newChildPrefix + '-ORDER').val(formCount + 1);\n            }\n            self.updateMoveButtonDisabledStates();\n            self.updateAddButtonState();\n            if (opts.onAdd)\n                opts.onAdd();\n        }\n    });\n    return self;\n}\nwindow.InlinePanel = InlinePanel;\nfunction cleanForSlug(val, useURLify) {\n    if (useURLify) {\n        // URLify performs extra processing on the string (e.g. removing stopwords) and is more suitable\n        // for creating a slug from the title, rather than sanitising a slug entered manually\n        // eslint-disable-next-line no-undef, new-cap\n        var cleaned = URLify(val, 255, window.unicodeSlugsEnabled);\n        // if the result is blank (e.g. because the title consisted entirely of stopwords),\n        // fall through to the non-URLify method\n        if (cleaned) {\n            return cleaned;\n        }\n    }\n    // just do the \"replace\"\n    if (window.unicodeSlugsEnabled) {\n        return val.replace(/\\s/g, '-').replace(/[&/\\\\#,+()$~%.'\":`@^!*?<>{}]/g, '').toLowerCase();\n    }\n    return val.replace(/\\s/g, '-').replace(/[^A-Za-z0-9\\-_]/g, '').toLowerCase();\n}\nwindow.cleanForSlug = cleanForSlug;\nfunction initSlugAutoPopulate() {\n    var slugFollowsTitle = false;\n    // eslint-disable-next-line func-names\n    jquery_1[\"default\"]('#id_title').on('focus', function () {\n        /* slug should only follow the title field if its value matched the title's value at the time of focus */\n        var currentSlug = jquery_1[\"default\"]('#id_slug').val();\n        var slugifiedTitle = cleanForSlug(this.value, true);\n        slugFollowsTitle = (currentSlug === slugifiedTitle);\n    });\n    // eslint-disable-next-line func-names\n    jquery_1[\"default\"]('#id_title').on('keyup keydown keypress blur', function () {\n        if (slugFollowsTitle) {\n            var slugifiedTitle = cleanForSlug(this.value, true);\n            jquery_1[\"default\"]('#id_slug').val(slugifiedTitle);\n        }\n    });\n}\nwindow.initSlugAutoPopulate = initSlugAutoPopulate;\nfunction initSlugCleaning() {\n    // eslint-disable-next-line func-names\n    jquery_1[\"default\"]('#id_slug').on('blur', function () {\n        // if a user has just set the slug themselves, don't remove stop words etc, just illegal characters\n        jquery_1[\"default\"](this).val(cleanForSlug(jquery_1[\"default\"](this).val(), false));\n    });\n}\nwindow.initSlugCleaning = initSlugCleaning;\nfunction initErrorDetection() {\n    var errorSections = {};\n    // first count up all the errors\n    // eslint-disable-next-line func-names\n    jquery_1[\"default\"]('.error-message').each(function () {\n        var parentSection = jquery_1[\"default\"](this).closest('section');\n        if (!errorSections[parentSection.attr('id')]) {\n            errorSections[parentSection.attr('id')] = 0;\n        }\n        errorSections[parentSection.attr('id')] = errorSections[parentSection.attr('id')] + 1;\n    });\n    // now identify them on each tab\n    // eslint-disable-next-line no-restricted-syntax, guard-for-in\n    for (var index in errorSections) {\n        jquery_1[\"default\"]('.tab-nav a[href=\"#' + index + '\"]').addClass('errors').attr('data-count', errorSections[index]);\n    }\n}\nwindow.initErrorDetection = initErrorDetection;\nfunction initCollapsibleBlocks() {\n    // eslint-disable-next-line func-names\n    jquery_1[\"default\"]('.object.multi-field.collapsible').each(function () {\n        var $li = jquery_1[\"default\"](this);\n        var $fieldset = $li.find('fieldset');\n        if ($li.hasClass('collapsed') && $li.find('.error-message').length === 0) {\n            $fieldset.hide();\n        }\n        $li.find('> .title-wrapper').on('click', function () {\n            if (!$li.hasClass('collapsed')) {\n                $li.addClass('collapsed');\n                $fieldset.hide('slow');\n            }\n            else {\n                $li.removeClass('collapsed');\n                $fieldset.show('show');\n            }\n        });\n    });\n}\nwindow.initCollapsibleBlocks = initCollapsibleBlocks;\nfunction initKeyboardShortcuts() {\n    // eslint-disable-next-line no-undef\n    Mousetrap.bind(['mod+p'], function () {\n        jquery_1[\"default\"]('.action-preview').trigger('click');\n        return false;\n    });\n    // eslint-disable-next-line no-undef\n    Mousetrap.bind(['mod+s'], function () {\n        jquery_1[\"default\"]('.action-save').trigger('click');\n        return false;\n    });\n}\nwindow.initKeyboardShortcuts = initKeyboardShortcuts;\njquery_1[\"default\"](function () {\n    /* Only non-live pages should auto-populate the slug from the title */\n    if (!jquery_1[\"default\"]('body').hasClass('page-is-live')) {\n        initSlugAutoPopulate();\n    }\n    initSlugCleaning();\n    initErrorDetection();\n    initCollapsibleBlocks();\n    initKeyboardShortcuts();\n    //\n    // Preview\n    //\n    // In order to make the preview truly reliable, the preview page needs\n    // to be perfectly independent from the edit page,\n    // from the browser perspective. To pass data from the edit page\n    // to the preview page, we send the form after each change\n    // and save it inside the user session.\n    var $previewButton = jquery_1[\"default\"]('.action-preview');\n    var $form = jquery_1[\"default\"]('#page-edit-form');\n    var previewUrl = $previewButton.data('action');\n    var autoUpdatePreviewDataTimeout = -1;\n    function setPreviewData() {\n        return jquery_1[\"default\"].ajax({\n            url: previewUrl,\n            method: 'POST',\n            data: new FormData($form[0]),\n            processData: false,\n            contentType: false\n        });\n    }\n    $previewButton.one('click', function () {\n        if ($previewButton.data('auto-update')) {\n            // Form data is changed when field values are changed\n            // (change event), when HTML elements are added, modified, moved,\n            // and deleted (DOMSubtreeModified event), and we need to delay\n            // setPreviewData when typing to avoid useless extra AJAX requests\n            // (so we postpone setPreviewData when keyup occurs).\n            // eslint-disable-next-line no-warning-comments\n            // TODO: Replace DOMSubtreeModified with a MutationObserver.\n            $form.on('change keyup DOMSubtreeModified', function () {\n                clearTimeout(autoUpdatePreviewDataTimeout);\n                autoUpdatePreviewDataTimeout = setTimeout(setPreviewData, 1000);\n            }).trigger('change');\n        }\n    });\n    // eslint-disable-next-line func-names\n    $previewButton.on('click', function (e) {\n        e.preventDefault();\n        var $this = jquery_1[\"default\"](this);\n        var $icon = $this.filter('.icon');\n        var thisPreviewUrl = $this.data('action');\n        $icon.addClass('icon-spinner').removeClass('icon-view');\n        var previewWindow = window.open('', thisPreviewUrl);\n        previewWindow.focus();\n        setPreviewData().done(function (data) {\n            if (data.is_valid) {\n                previewWindow.document.location = thisPreviewUrl;\n            }\n            else {\n                window.focus();\n                previewWindow.close();\n                // eslint-disable-next-line no-warning-comments\n                // TODO: Stop sending the form, as it removes file data.\n                $form.trigger('submit');\n            }\n        }).fail(function () {\n            // eslint-disable-next-line no-alert\n            alert('Error while sending preview data.');\n            window.focus();\n            previewWindow.close();\n        })\n            .always(function () {\n            $icon.addClass('icon-view').removeClass('icon-spinner');\n        });\n    });\n});\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports.cleanForSlug = cleanForSlug;\n}\n","module.exports = jQuery;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n// It's empty as some runtime module handles the default behavior\n__webpack_require__.x = function() {}\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// Promise = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t607: 0\n};\n\nvar deferredModules = [\n\t[85843,751],\n\t[90971,751]\n];\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\nvar checkDeferredModules = function() {};\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tvar executeModules = data[3];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0, resolves = [];\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tresolves.push(installedChunks[chunkId][0]);\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\twhile(resolves.length) {\n\t\tresolves.shift()();\n\t}\n\n\t// add entry modules from loaded chunk to deferred list\n\tif(executeModules) deferredModules.push.apply(deferredModules, executeModules);\n\n\t// run deferred modules when all chunks ready\n\treturn checkDeferredModules();\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkwagtail\"] = self[\"webpackChunkwagtail\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n\nfunction checkDeferredModulesImpl() {\n\tvar result;\n\tfor(var i = 0; i < deferredModules.length; i++) {\n\t\tvar deferredModule = deferredModules[i];\n\t\tvar fulfilled = true;\n\t\tfor(var j = 1; j < deferredModule.length; j++) {\n\t\t\tvar depId = deferredModule[j];\n\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferredModules.splice(i--, 1);\n\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n\t\t}\n\t}\n\tif(deferredModules.length === 0) {\n\t\t__webpack_require__.x();\n\t\t__webpack_require__.x = function() {};\n\t}\n\treturn result;\n}\nvar startup = __webpack_require__.x;\n__webpack_require__.x = function() {\n\t// reset startup function so it can be called again when more startup code is added\n\t__webpack_require__.x = startup || (function() {});\n\treturn (checkDeferredModules = checkDeferredModulesImpl)();\n};","// run startup\nreturn __webpack_require__.x();\n"],"sourceRoot":""}